@using System.Globalization
@inject IJSRuntime JS
@inject NavigationManager Navigation
@inject ILocalStorageService localStorage

<MudSelect Margin="Margin.Dense" Style="width:55px; height:55px;" CloseIcon="null" OpenIcon="null" @bind-Value="Culture" ToStringFunc="selectedCulture => dislayedValues(selectedCulture)" @bind-Value:after="@CultureInfochanged" DisableUnderLine=true AnchorOrigin="Origin.BottomCenter">
    @foreach (var culture in supportedCultures)
    {
        <MudSelectItem Style="--mud-typography-body1-size: 15px;" Value=@culture />
    }
</MudSelect>

@code
{

    private CultureInfo[] supportedCultures = new[]
    {
        new CultureInfo("en"),
        new CultureInfo("el")
    };
    private CultureInfo Culture { get; set; } = CultureInfo.CurrentCulture;


    private void CultureInfochanged()
    {
        if (CultureInfo.CurrentCulture != Culture)
        {
            localStorage.SetItemAsStringAsync("BlazorCulture", Culture.Name);
            Navigation.NavigateTo(Navigation.Uri, forceLoad: true);
        }
    }

    private string dislayedValues(CultureInfo selectedCulture)
    {
        return selectedCulture.Name.ToUpper();
    }
}