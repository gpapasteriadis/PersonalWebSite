@using System.Globalization
@using PersonalWebSite.SharedState
@inject IJSRuntime JS
@inject NavigationManager Navigation
@inject ILocalStorageService localStorage
@inject StateContainer State

<MudButton Class="rounded-pill" OnClick="CultureInfochanged2">
    <MudText>
        @language
    </MudText>
</MudButton>

@code
{

    private CultureInfo[] supportedCultures = new[]
    {
        new CultureInfo("en"),
        new CultureInfo("el")
    };
    private string language = CultureInfo.CurrentCulture.Name.ToUpper();


    private async Task CultureInfochanged2()
    {
        CultureInfo currentCulture;
        if (language.Equals(supportedCultures[0].Name, StringComparison.OrdinalIgnoreCase)) currentCulture = supportedCultures[1];
        else currentCulture = supportedCultures[0];

        language = currentCulture.Name.ToUpper();
        await localStorage.SetItemAsStringAsync("BlazorCulture", currentCulture.Name);
        State.NavigateHome();
    }

}