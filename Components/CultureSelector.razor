@using System.Globalization
@using PersonalWebSite.SharedState
@inject IJSRuntime JS
@inject NavigationManager Navigation
@inject ILocalStorageService localStorage
@inject StateContainer State

<MudButton Class="rounded-pill" OnClick="CultureInfochanged2">
    <MudText Typo=CaltureTypo()>
        @language
    </MudText>
</MudButton>

@code
{

    [Parameter]
    public Breakpoint currentBreakpoint { get; set; }

    private CultureInfo[] supportedCultures = new[]
    {
        new CultureInfo("en"),
        new CultureInfo("el")
    };
    private string language = CultureInfo.CurrentCulture.Name.ToUpper();


    private async Task CultureInfochanged2()
    {
        CultureInfo currentCulture;
        if (language.Equals(supportedCultures[0].Name, StringComparison.OrdinalIgnoreCase)) currentCulture = supportedCultures[1];
        else currentCulture = supportedCultures[0];

        language = currentCulture.Name.ToUpper();
        await localStorage.SetItemAsStringAsync("BlazorCulture", currentCulture.Name);
        State.NavigateHome();
    }

    private Typo CaltureTypo()
    {
        var size = currentBreakpoint;

        switch (size)
        {
            case Breakpoint.Xs: // Smartphone
                return Typo.body1;

            case Breakpoint.Sm:// 600px> Tablet <960px
                return Typo.h6;

            case Breakpoint.MdAndUp:// 960px> Tablet/laptop <1280px
                return Typo.h6;

            default: return Typo.h6;
        }
    }

}